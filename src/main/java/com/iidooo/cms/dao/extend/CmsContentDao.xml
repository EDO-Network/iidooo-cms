<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.iidooo.cms.dao.extend.CmsContentDao" >
  <resultMap id="BaseResultMap" type="com.iidooo.cms.dto.extend.CmsContentDto" >
    <id column="ContentID" property="contentID" jdbcType="INTEGER" />
    <result column="ChannelID" property="channelID" jdbcType="INTEGER" />
    <result column="ContentType" property="contentType" jdbcType="VARCHAR" />
    <result column="ContentTitle" property="contentTitle" jdbcType="VARCHAR" />
    <result column="ContentSubTitle" property="contentSubTitle" jdbcType="VARCHAR" />
    <result column="ContentImageTitle" property="contentImageTitle" jdbcType="VARCHAR" />
    <result column="MetaTitle" property="metaTitle" jdbcType="VARCHAR" />
    <result column="MetaKeywords" property="metaKeywords" jdbcType="VARCHAR" />
    <result column="MetaDescription" property="metaDescription" jdbcType="VARCHAR" />
    <result column="ContentSummary" property="contentSummary" jdbcType="VARCHAR" />
    <result column="IsSilent" property="isSilent" jdbcType="INTEGER" />
    <result column="PageViewCount" property="pageViewCount" jdbcType="INTEGER" />
    <result column="UniqueVisitorCount" property="uniqueVisitorCount" jdbcType="INTEGER" />
    <result column="StarCount" property="starCount" jdbcType="INTEGER" />
    <result column="Remarks" property="remarks" jdbcType="VARCHAR" />
    <result column="CreateTime" property="createTime" jdbcType="VARCHAR" />
    <result column="CreateUser" property="createUser" jdbcType="INTEGER" />
    <result column="UpdateTime" property="updateTime" jdbcType="VARCHAR" />
    <result column="UpdateUser" property="updateUser" jdbcType="INTEGER" />
    <result column="IsDelete" property="isDelete" jdbcType="INTEGER" />
    <result column="Version" property="version" jdbcType="INTEGER" />
  </resultMap>
  <resultMap id="ResultMapWithBLOBs" type="com.iidooo.cms.dto.generate.CmsContent" extends="BaseResultMap" >
    <result column="ContentBody" property="contentBody" jdbcType="LONGVARCHAR" />
  </resultMap>
  <sql id="Base_Column_List" >
    C.ContentID, C.ChannelID, C.ContentType, C.ContentTitle, C.ContentSubTitle, C.ContentImageTitle, 
    C.MetaTitle, C.MetaKeywords, C.MetaDescription, C.ContentSummary, C.IsSilent, C.PageViewCount, 
    C.UniqueVisitorCount, C.StarCount, C.Remarks, C.CreateTime, C.CreateUser, C.UpdateTime, C.UpdateUser, 
    C.IsDelete, C.Version
  </sql>
  <sql id="Blob_Column_List" >
    C.ContentBody
  </sql>
  
  <select id="selectContentListByType" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from CMS_CONTENT C
    join CMS_CHANNEL L on 
    C.IsDelete = 0 and L.IsDelete = 0 and C.ChannelID = L.ChannelID 
    and L.ChannelPath =  #{channelPath,jdbcType=VARCHAR} 
    and C.ContentType = #{contentType,jdbcType=VARCHAR}
    order by ${page.sortField} ${page.sortType} limit ${page.start}, ${page.pageSize}
  </select>
</mapper>